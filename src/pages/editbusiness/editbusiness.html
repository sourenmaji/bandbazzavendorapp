
<ion-header>

  <ion-navbar color="headers">
    <ion-title>Edit Business</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>

    <ion-card>
        <ion-card-content>
          <ion-list>
              <form novalidate  [formGroup]="editBusinessform">
                  <ion-item >
                      <ion-label>Business Type <span style="color: red">*</span></ion-label>
                      <ion-input type="text" [(ngModel)]="userData.businessType"
                      formControlName="businessType" value="{{business.module_name}}" ></ion-input>

                    </ion-item>
                    <ion-item [hidden]="true">
                      <ion-input  type="text" [(ngModel)]="userData.business_id" value="{{business.id}}"
                      formControlName="business_id"></ion-input>

                    </ion-item>

                    <ion-item>
                      <ion-label floating>Company Name <span style="color: red">*</span></ion-label>
                      <ion-input type="text" [(ngModel)]="userData.companyName" value="{{business.company_name}}"
                      formControlName="companyName" [class.error1]="!editBusinessform.controls.companyName.valid && editBusinessform.controls.companyName.dirty"></ion-input>
                    </ion-item>
                      <div class="error" *ngIf="editBusinessform.get('companyName').hasError('required') && editBusinessform.get('companyName').touched">
                        Please enter company name
                      </div>

                    <ion-item>
                      <ion-label floating>City <span style="color: red">*</span> <small> (please select a city from dropdown first)</small></ion-label>
                      <ion-input type="text" id="city" [(ngModel)]="userData.city" value="{{business.city}}" (keyup)="autolocation()"
                      formControlName="city" [class.error1]="!editBusinessform.controls.city.valid && editBusinessform.controls.city.dirty"></ion-input>
                    </ion-item>
                    <ion-input type="hidden" [(ngModel)]="userData.lat" formControlName="lat" value="{{business.lat}}"></ion-input>
                    <ion-input type="hidden" [(ngModel)]="userData.lng" formControlName="lng" value="{{business.lng}}"></ion-input>
                      <div class="error" *ngIf="(editBusinessform.get('city').hasError('required') && editBusinessform.get('city').touched) && editBusinessform.get('lat').hasError('required')">
                        Please enter valid city
                      </div>

                    <ion-item>
                      <ion-label floating>Address <span style="color: red">*</span></ion-label>
                      <ion-textarea type="text" [(ngModel)]="userData.address" value="{{business.address}}"
                      formControlName="address" [class.error1]="!editBusinessform.controls.address.valid && editBusinessform.controls.address.dirty"></ion-textarea>
                    </ion-item>
                      <div class="error" *ngIf="editBusinessform.get('address').hasError('required') && editBusinessform.get('address').touched">
                        Please enter address
                      </div>

                    <ion-item>
                      <ion-label floating>Details <span style="color: red">*</span></ion-label>
                      <ion-textarea type="text" [(ngModel)]="userData.details" value="{{business.details}}"
                      formControlName="details" [class.error1]="!editBusinessform.controls.details.valid && editBusinessform.controls.details.dirty"></ion-textarea>
                    </ion-item>
                      <div class="error" *ngIf="editBusinessform.get('details').hasError('required') && editBusinessform.get('details').touched">
                        Please enter details
                      </div>

                    <ion-item>
                      <ion-label floating>Email <span style="color: red">*</span></ion-label>
                      <ion-input type="email" [(ngModel)]="userData.email" value="{{business.email}}"
                      formControlName="email" [class.error1]="!editBusinessform.controls.email.valid && editBusinessform.controls.email.dirty"></ion-input>
                    </ion-item>
                    <ion-item no-lines *ngIf="( editBusinessform.get('email').hasError('minlength') || editBusinessform.get('email').hasError('pattern') ||editBusinessform.get('email').hasError('required') ) && editBusinessform.get('email').touched">
                      <div class="error" *ngIf="editBusinessform.get('email').hasError('required') && editBusinessform.get('email').touched">
                        Please enter your email
                      </div>
                      <div class="error" *ngIf="editBusinessform.get('email').hasError('pattern') && editBusinessform.get('email').touched">
                        This value should be a valid email
                      </div>
                    </ion-item>
                      <ion-item>
                          <ion-label floating>Phone <span style="color: red">*</span></ion-label>
                          <ion-input type="number" [(ngModel)]="userData.phone" value="{{business.phone_no}}"
                          formControlName="phone" [class.error1]="!editBusinessform.controls.phone.valid && editBusinessform.controls.phone.dirty"></ion-input>
                        </ion-item>
                        <ion-item no-lines *ngIf="( editBusinessform.get('phone').hasError('minlength') || editBusinessform.get('phone').hasError('pattern') ||editBusinessform.get('phone').hasError('required') ) && editBusinessform.get('phone').touched">
                          <div class="error" *ngIf="editBusinessform.get('phone').hasError('required') && editBusinessform.get('phone').touched">
                            Please enter your phone no.
                          </div>
                          <div class="error" *ngIf="editBusinessform.get('phone').hasError('pattern') && editBusinessform.get('phone').touched">
                            This value should be a valid phone no.
                          </div>
                        </ion-item>
                    <ion-item>
                      <img  [src]="businessImageSrc" style="width: 100%">
                    </ion-item>
                    <ion-row>
                      <ion-col color="primary">
                        <ion-buttons>
                          <button ion-button icon-left full (click)="presentActionSheet()">
                            <ion-icon name="camera"></ion-icon>Select Image
                          </button>

                        </ion-buttons>
                      </ion-col>
                    </ion-row>
                    <button  ion-button block color="success" [disabled]="editBusinessform.invalid" (click)="saveEditProfile()">Update</button><br/>
                    </form>
            </ion-list>
            </ion-card-content>
            </ion-card>
</ion-content>
