
<ion-header>

  <ion-navbar color="headers">
    <ion-title>Add Business</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>

    <ion-card>
        <ion-card-content>
          <ion-list>
              <form novalidate [formGroup]="addBusinessform">
                  <ion-item>
                      <ion-label>Business Type <span style="color: red">*</span></ion-label>
                      <ion-select [(ngModel)]="userData.businessType"
                      formControlName="businessType">
                        <ion-option *ngFor ="let business of businessDetails; let i = index" value="{{business.id}}">{{business.title}}</ion-option>
                      </ion-select>
                    </ion-item>

                    <ion-item>
                      <ion-label floating>Company Name <span style="color: red">*</span></ion-label>
                      <ion-input type="text" [(ngModel)]="userData.companyName"
                      formControlName="companyName"></ion-input>
                    </ion-item>
                      <div class="error" *ngIf="addBusinessform.get('companyName').hasError('required') && addBusinessform.get('companyName').touched">
                        Please enter company name
                      </div>

 
                    <ion-item>
                      <ion-label floating>City <span style="color: red">*</span><small> (Please select a city from dropdown first)</small></ion-label>
                      <ion-input type="text" [(ngModel)]="userData.city" id="city" (keyup)="autolocation()"
                      formControlName="city"></ion-input>
                    </ion-item>

                      <div class="error" *ngIf="(addBusinessform.get('city').hasError('required') && addBusinessform.get('city').touched) && addBusinessform.get('lat').hasError('required')">
                        Please enter valid city
                      </div>
 
                    <ion-item>
                      <ion-label floating>Address <span style="color: red">*</span></ion-label>
                      <ion-input type="text" [(ngModel)]="userData.address"
                      formControlName="address"></ion-input>
                    </ion-item>
                      <div class="error" *ngIf="addBusinessform.get('address').hasError('required') && addBusinessform.get('address').touched">
                        Please enter address
                      </div>

                    <ion-item>
                      <ion-label floating>Details <span style="color: red">*</span></ion-label>
                      <ion-textarea type="text" [(ngModel)]="userData.details"
                      formControlName="details"></ion-textarea>
                    </ion-item>

                      <div class="error" *ngIf="addBusinessform.get('details').hasError('required') && addBusinessform.get('details').touched">
                        Please enter details
                      </div>

                    <ion-item>
                      <ion-label floating>Email <span style="color: red">*</span></ion-label>
                      <ion-input type="email" [(ngModel)]="userData.email"
                      formControlName="email"></ion-input>
                    </ion-item>
                    <div>
                      <div class="error" *ngIf="addBusinessform.get('email').hasError('required') && addBusinessform.get('email').touched">
                        Please enter your email
                      </div>
                      <div class="error" *ngIf="addBusinessform.get('email').hasError('pattern') && !addBusinessform.get('email').hasError('required')">
                        This value should be a valid email
                      </div>
                    </div>
                      <ion-item>
                          <ion-label floating>Phone <span style="color: red">*</span></ion-label>
                          <ion-input type="number" [(ngModel)]="userData.phone"
                          formControlName="phone"></ion-input>
                        </ion-item>
                        <div>
                          <div class="error" *ngIf="addBusinessform.get('phone').hasError('required') && addBusinessform.get('phone').touched">
                            Please enter your phone no.
                          </div>
                          <div class="error" *ngIf="addBusinessform.get('phone').hasError('pattern') && !addBusinessform.get('phone').hasError('required')">
                            This value should be a valid phone no.
                          </div>
                        </div>

                    <ion-item>
                      <img *ngIf="imagePath" src="{{'data:image/jpeg;base64,' + imagePath}}">
                      <h3 *ngIf="!imagePath" class="error">Please Select Image!</h3>
                    </ion-item>
                    <ion-row>
                      <ion-col color="primary">
                        <ion-buttons>
                          <button ion-button icon-left full (click)="presentActionSheet()">
                            <ion-icon name="camera"></ion-icon>Select Image
                          </button>

                        </ion-buttons>
                      </ion-col>
                    </ion-row>
                    <ion-input type="hidden" [(ngModel)]="userData.lat" formControlName="lat"></ion-input>
                    <ion-input type="hidden" [(ngModel)]="userData.lng" formControlName="lng" ></ion-input>
                    <button ion-button block color="success" [disabled]="addBusinessform.invalid || imagePath == null" (click)="addBusiness()">Add</button><br/>
                    </form>
            </ion-list>
            </ion-card-content>
            </ion-card>
</ion-content>
